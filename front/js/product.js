let productData=[];const titleHeaderLocation=document.querySelector("head > title"),imgLocation=document.querySelector(".item__img");console.log(imgLocation);const h1Location=document.getElementById("title"),priceLocation=document.getElementById("price"),descriptionLocation=document.getElementById("description"),colorsLocation=document.getElementById("colors"),urlIdSelected=window.location.search;console.log(urlIdSelected);const url=new URLSearchParams(urlIdSelected);console.log(url);const id=url.get("id");console.log(id);const fetchProduct=async()=>{await fetch(`https://kanap-kue4.onrender.com/api/products/${id}`).then((t=>t.json())).then((t=>productData=t)).catch((t=>console.error("An error occurred:",t))),console.log(productData)};async function productDisplay(){await fetchProduct(),console.log(productData.name);let t=productData.name,e=productData.imageUrl,o=productData.altTxt,c=productData.price,n=productData.description;titleHeaderLocation.textContent=`${t}`;let a=document.createElement("img");a.src=e.replace("http://","https://"),a.alt=o,imgLocation.appendChild(a);let l=document.createElement("h1");l.textContent=t,h1Location.appendChild(l),priceLocation.textContent=c,descriptionLocation.textContent=n,colorsLocation.innerHTML="";let r=[];for(let t=0;t<productData.colors.length;t++)if(productData.colors[`${t}`]){let e=productData.colors[`${t}`];console.log(e);let o=document.createElement("option");o.value=e,o.textContent=e,r.push(o)}r.forEach((t=>colorsLocation.appendChild(t)))}fetchProduct(),productDisplay(),document.getElementById("addToCart").addEventListener("click",(()=>ProductsValues()));const ProductsValues=()=>{const t=document.getElementById("colors"),e=document.getElementById("quantity"),o={color:t.value,quantity:parseInt(e.value),id:id};let c=JSON.parse(localStorage.getItem("products"))||[];const n=c.findIndex((t=>t.id===o.id&&t.color===o.color));o.quantity<1||o.quantity>100?alert("Veuillez sélectionner une quantité entre 1 et 100"):(-1===n?c.push(o):c[n].quantity+=o.quantity,localStorage.setItem("products",JSON.stringify(c)),location.href="./cart.html")};